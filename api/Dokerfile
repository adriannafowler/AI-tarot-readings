FROM python:3.10-bullseye
RUN python -m pip install --upgrade pip
WORKDIR /app

COPY requirements.txt requirements.txt
RUN python -m pip install -r requirements.txt

COPY accounts accounts
COPY tarot_project tarot_project
COPY tarot_rest tarot_rest
COPY db.sqlite3 db.sqlite3
COPY manage.py manage.py

# COPY migrations migrations

EXPOSE 8000

# CMD uvicorn main:app --host 0.0.0.0 --port 80 --forwarded-allow-ips "*"
CMD uvicorn main:app --host 0.0.0.0 --port 80
